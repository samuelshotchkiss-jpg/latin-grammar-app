body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f8f9fa;
    padding: 20px;
}

#app-container {
    max-width: 900px;
    margin: 0 auto;
    background-color: #ffffff;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 2px solid #e9ecef;
    padding-bottom: 15px;
    margin-bottom: 20px;
}

header h1 {
    margin: 0;
    color: #495057;
    font-size: 1.8em;
}

#header-controls { display: flex; align-items: center; }

#reset-button {
    background-color: #6c757d;
    font-size: 0.8em;
    padding: 5px 10px;
    margin-right: 20px;
    white-space: nowrap;
}
#reset-button:hover { background-color: #dc3545; }

#counters { text-align: right; font-weight: bold; font-size: 1.1em; color: #6c757d; }
#score-counter, #incorrect-counter { margin-bottom: 5px; }
#incorrect-counter { color: #dc3545; }
#question-area { padding: 15px; background-color: #e9ecef; border-radius: 6px; margin-bottom: 25px; }
#question-prompt { margin-top: 0; text-align: center; color: #0056b3; }
#controls { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; }
#question-selector span { font-weight: bold; margin-right: 10px; }
button { padding: 10px 18px; font-size: 1em; border: none; border-radius: 5px; cursor: pointer; background-color: #007bff; color: white; transition: background-color 0.2s; }
button:hover { background-color: #0056b3; }
#question-selector button { background-color: #6c757d; margin-right: 5px; }
#question-selector button.active { background-color: #343a40; box-shadow: 0 0 0 2px #ffffff, 0 0 0 4px #343a40; }
#question-selector button.completed { opacity: 0.6; }
.completion-check { display: none; color: #28a745; margin-left: 5px; }
button.completed .completion-check { display: inline; }
#text-container { font-size: 1.4em; line-height: 2; padding: 10px; border: 1px solid #dee2e6; border-radius: 6px; position: relative; }
#text-container.locked, #text-container.locked .word { cursor: not-allowed; }
.word-container { display: inline-block; position: relative; vertical-align: top; }
.word { cursor: pointer; padding: 2px 4px; border-radius: 4px; transition: background-color 0.2s, color 0.2s; }
.punctuation { white-space: pre-wrap; }
.word.selected { background-color: #bde0fe; }
.word.correct.selected { background-color: #c8e6c9; }
.word.incorrect.selected { background-color: #ffcdd2; }
.word.correct { background-color: transparent; color: #28a745; font-weight: bold; }
.word.incorrect { background-color: transparent; color: #dc3545; font-weight: bold; text-decoration: line-through; }
.word.correct::after { content: " ✓"; color: #28a745; }
.word.incorrect::after { content: " ✗"; color: #dc3545; }
.hidden { display: none !important; }
p { margin-top: 0; margin-bottom: 1em; word-spacing: 0.1em; }
p:last-child { margin-bottom: 0; }
.speech-bubble { position: absolute; bottom: 125%; left: 50%; transform: translateX(-50%); background-color: #343a40; color: white; padding: 10px 15px; border-radius: 6px; width: 280px; font-size: 0.7em; line-height: 1.5; box-shadow: 0 4px 8px rgba(0,0,0,0.2); z-index: 10; cursor: pointer; }
.speech-bubble::after { content: ''; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border-width: 8px; border-style: solid; border-color: #343a40 transparent transparent transparent; }
.speech-bubble.align-right { left: auto; right: 0; transform: translateX(0); }
.speech-bubble.align-right::after { left: auto; right: 15px; transform: translateX(0); }
.speech-bubble.align-left { left: 0; right: auto; transform: translateX(0); }
.speech-bubble.align-left::after { left: 15px; }
.provisional-score { color: #fd7e14; font-weight: bold; }
#completion-message { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; max-width: 500px; background-color: white; border: 1px solid #ccc; box-shadow: 0 5px 15px rgba(0,0,0,0.3); border-radius: 8px; padding: 25px; text-align: center; z-index: 100; }
#completion-message h3 { margin-top: 0; font-size: 1.5em; }
#completion-message.congrats h3 { color: #28a745; }
#completion-message.encourage h3 { color: #007bff; }
#completion-message.warning h3 { color: #dc3545; }
#completion-message button { margin-top: 15px; background-color: #6c757d; }
#hints-container { margin-top: 25px; padding: 15px; border: 1px solid #e9ecef; border-radius: 6px; }
#hints-container h3 { margin-top: 0; border-bottom: 1px solid #dee2e6; padding-bottom: 10px; margin-bottom: 15px; }
/* --- NEW TOOLTIP STYLES START HERE --- */

/* This creates the bubble part of the tooltip */
/* --- REPLACE THE OLD HINT TOOLTIP RULES WITH THESE --- */

/* This creates the bubble part of the tooltip */
.hint-checkbox-wrapper[data-tooltip]:hover::before {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 140%;
    left: 0; /* ANCHOR the bubble to the left edge of the wrapper */
    background-color: #6c757d;
    color: white;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 0.8em;
    white-space: nowrap;
    z-index: 20;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.2s;
}

/* This creates the little triangle pointer */
.hint-checkbox-wrapper[data-tooltip]:hover::after {
    content: '';
    position: absolute;
    bottom: calc(140% - 8px);
    left: 15px; /* POSITION the triangle precisely over the checkbox */
    border-width: 8px;
    border-style: solid;
    border-color: #6c757d transparent transparent transparent;
    z-index: 20;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.2s;
}

/* These ensure the tooltip is hidden by default */
.hint-checkbox-wrapper[data-tooltip]::before,
.hint-checkbox-wrapper[data-tooltip]::after {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}
.hint-checkbox-wrapper { position: relative; margin-bottom: 10px; }
.hint-checkbox-wrapper label { font-weight: normal; font-size: 0.9em; }
input[type="checkbox"]:disabled + label { color: #adb5bd; cursor: not-allowed; }
.color-key { display: inline-block; margin-left: 20px; font-size: 0.8em; }
.color-box { display: inline-block; width: 12px; height: 12px; border: 1px solid #ccc; margin-right: 5px; vertical-align: middle; }
.hint-noun { background-color: #d1c4e9; }
.hint-verb { background-color: #fff59d; }
/* This line has been updated */
.hint-adjective { background-color: #ffdab9; } /* Light Peach */

span.sentence.hint-sentence-highlight {
    background-color: #e3f2fd;
    transition: background-color 0.3s;
    padding: 2px 0;
    border-radius: 3px;
}
/* This class must also be updated */
.word.hint-adjective { background-color: #ffdab9; } /* Light Peach */